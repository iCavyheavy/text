НА ШЛЯХУ ДО ІНДУСТРІЇ 4.0: ІНТЕГРАЦІЯ ІСНУЮЧИХ АСУТП З ХМАРНИМИ СЕРВІСАМИ

Анотація: Сучасний світ прямує в напрямку побудови гнучкого виробництва, яке передбачає задоволення потреб кожного клієнта, виготовлення якісного продукту, високоефективне використання всіх ресурсів підприємства. Під час дослідження, результати якого наведені у статті, було розглянуто моделі архітектур Індустрії 4.0, які передбачають задоволення принципів побудови ефективного виробництва. Детально був проведений аналіз німецької моделі Reference architecture model for Industrie 4.0. Її основною ідеєю є представлення всіх активів підприємства у вигляді кібер-фізичних систем та забезпечення можливості комунікації із зовнішнім світом, усуваючи при цьому власні кордони для встановлення зв’язку з активами інших підприємств. Модель передбачає наявність єдиної, сумісної для всіх учасників, мережі. Як механізм інтеграції всіх компонентів було визначено необхідність застосування хмарних технологій. Тому метою роботи освітленої у статті було дослідження шляхів інтеграції існуючих АСУТП з урахуванням їх реалізацій у вигляді SCADA-програм та програмованих логічних контролерів, із хмарною платформою. З метою задоволення вимог моделі Індустрії 4.0 були запропоновані конкретні варіанти реалізації передачі історичних даних та даних реального часу зі SCADA-програм та програмованих логічних контролерів у хмару Microsoft Azure, при чому використовувалися її служби: IoT Hub, Service Bus, Azure SQL Database. Дослідження включало аналіз найбільш поширених комунікаційних можливостей SCADA-програм, аналіз існуючих хмарних платформ користувацького та промислового спрямування, вибір конкретної хмарної платформи та дослідження служб, які вона надає, пошук шляхів інтеграції SCADA-програм та програмованих логічних контролерів з обраною хмарною платформою, використовуючи попередній аналіз, подібні рішення та існуючі додаткові ресурси..
Abstract: The current trend of automation in manufacturing technologies includes creation of flexible, adaptable production which provides the ability to accommodate individualised customer wishes to quickly respond to customer wishes and the efficient use of resources. Different Industry 4.0 models that meet the fundamental aspects of extremely flexible, easily adaptable production processes and systems were considered during the research, the results of which were given in the article. A detailed analysis of the German model Reference architecture model for Industrie 4.0 was carried out. Its main idea is to represent each company`s asset like cyber-physical system and extend individual factory boundaries to ensures connections with other companies. To meet model`s requirements it`s crucial to provide the only one Industrie 4.0 compliant network for all nodes. Cloud technologies were defined as a way to integrate all company`s assets. Therefore the objective of the work was the investigation of variety ways to integrate the main automation components of the process control system, particularly SCADA applications and programmable logic controllers, with the cloud services. The Reference architecture model for Industrie 4.0 was analyzed and specific variants of historical and real-time data transmission from SCADA-applications and PLC to Microsoft Azure services in particular IoT Hub, Service Bus, Azure SQL Database were suggested in this article. The investigation included the analysis of the widespread communication capabilities of SCADA-applications, the overview of existing consumer and industrial cloud platforms and services providing by clouds, the researching of the ways to integrate SCADA-applications and PLC with selected cloud platform with the using of preceding analysis and existing additional resources
Ключові слова: Індустрія 4.0, промисловий інтернет речей, SCADA-програма, PLC, хмарна платформа, інтеграція, OPC UA, програмний шлюз, апаратний шлюз.
Keywords: Industrie 4.0, industrial internet of things, SCADA-application, PLC, cloud platform, integration, OPC UA, application gateway, hardware gateway.

Вступ
Зараз світ знаходиться на рубежі четвертої промислової революції, передумовою до якої стали насамперед
кардинальні зміни в світі цифрових пристроїв. Всеохоплюючий і мобільний Інтернет, мініатюрні розумні пристрої,
розумні виробничі машини з самонавчанням, здешевлення і відповідно доступність персональних гаджетів – стали
основою чергової трансформації суспільства та економіки.
Термін Industrie 4.0 вперше прозвучав офіційно у 2011 році на Ганноверському ярмарку у Німеччині і означив
процес корінного перетворення глобальних ланцюгів створення вартості [1]. Виробництво в рамках Індустрії 4.0
передбачає гнучкість, високу ефективність та продуктивність, а головне – задоволення індивідуальних потреб
кожного клієнта. На такому виробництві обладнання, сировина і готові продукти спілкуються між собою і спільно
керують виробництвом. Вироби самостійно знаходять свій шлях на всіх етапах виробничого процесу, а невеликі
фабрики можуть самостійно об’єднуватися в єдину промислову систему для виконання конкретного завдання
(замовлення). Людина в цьому процесі займає перш за все творчі ролі, аніж виконавчі. Все це забезпечує необхідну
гнучкість та індивідуалізацію під клієнта масового виробництва.
Кожна цивілізована країна вибирає свій шлях чергової індустріалізації. У будь якому випадку, обов’язковою для
всіх моделей цифрового підприємства є наявність для кожного фізичного компоненту (активу) цифрового двійника у
віртуальному світі. Спілкування таких компонентів між собою та зовнішнім світом відбувається через різноманітні
мережі, які об’єднуються в так званий Інтернет речей (IoT), а в промисловому виробництві – промисловий Інтернет
речей (IIoT). Враховуючи інтелектуалізацію та взаємодію "всього" кількість обчислень та обсяг даних значно
збільшується, що потребує значних обчислювальних ресурсів. Частина даних і складні обчислення можуть
знаходитися (проводитися) віддалено від фізичної сутності активу. Це можливо за рахунок використання хмарних
технологій (Cloud), які дають можливість винести з кінцевих пристроїв усі складні обчислення, зберігати велику
кількість даних та проводити їх обробку (BigData аналітика). Хмарні сервіси займають одне з основних місць в наборі
технологій Індустрії 4.0.
Створення виробництв відповідно до сучасних вимог Індустрії 4.0 потребує перебудови інфраструктури
підприємства. Разом з цим важливим фактором є можливість плавної його модернізації без тривалих зупинок
виробництва і значних капіталовкладень. На перший погляд це неможливо, з урахуванням необхідності повної
інтеграції підсистем та реорганізації бізнес-процесів. На багатьох підприємствах в тому чи іншому вигляді є
автоматизовані системи управління технологічними процесами та виробництвами, зроблених зокрема в ідеології
Індустрії 3.0. Інтеграція цих систем в підприємствах Індустрії 4.0 принаймні можлива як "атомарних" компонентів. Це
не дає максимальної гнучкості виробництва, однак наближає його до необхідної функціональності та дає можливість
поступово замінювати його компоненти. Слід зауважити, що існуючі системи управління мають доступ до великої
кількості даних, потенціал яких значно більший за використовуваний. Окрім того, такі системи як правило відкриті
для приймання керуючих дій, що дає можливість реалізовувати координаційне керування. Якщо ці системи мають
"генетичну" здатність до модернізації (на базі PLC, SCADA-програм або DCS), то шанси до поступового переходу
підприємства до функціональності Індустрії 4.0 досить високі. Для таких систем нові технології, зокрема хмарні
сервіси збереження та обчислення дають можливість «наростити» необхідний функціонал гнучкого І4.0-виробництва.
Питання інтеграції існуючих систем АСУТП між собою та з системами управління верхнього рівня (наприклад
MES/MOM) на сьогоднішній день достатньо пророблені. Натомість практичних «рецептів» інтеграції АСУТП з
хмарними сервісами нам не зустрічалися у відкритих джерелах. Нами проведено дослідження, метою якого було
визначення способів інтеграції систем АСУТП з передовими на сьогоднішній день хмарними сервісами. У
дослідженні враховувалися особливості реалізації АСУТП в Україні та доступні на ринку хмарні сервіси. У цій статті
наведені основні результати цього дослідження.
Моделі Індустрії 4.0.
На шляху до побудови цифрового виробництва, яке характеризується широким застосуванням промислового
Інтернету речей (IIoT), виникла необхідність у розробці узагальнених моделей, які б описували архітектуру
цифрового виробництва (економіки) з точки зору його побудови, необхідності використання конкретних технологій та
стандартів. У зв’язку з цим у світі було створено кілька організацій, які займаються просуненням промислового
інтернету речей та Індустрії 4.0. Найбільш передовими є Консорціум Промислового Інтернету (The Industrial Internet
Consortium) та Plattform Industrie 4.0. Перша заснована п’ятьма компаніями AT&T, Cisco, GeneralElectric, Intel, and
IBM з метою прискорення застосування промислового Інтернету речей. Заснування організації Plattform Industrie 4.0
ініційоване урядом Німеччини з метою реалізації «Високотехнологічної стратегії 2020 для Німеччини», та включає
такі німецькі асоціації як BITKOM, VDMA і ZVEI, а також інші комерційні та некомерційні організації і ВНЗ.
Консорціумом промислового Інтернету розроблена модель "The industrial internet reference architecture v 1.8" (IIRA), в
якій основну увагу приділено використанню спільної архітектури для розробки взаємно-сумісних систем IIoT для
різноманітних промислових застосувань у державному та приватному секторах [2]. Plattform Industrie 4.0, в свою
чергу, запропонувала свою модель "The Reference architecture model for Industrie 4.0"( Еталонна модель архітектури
Індустрії 4.0, RAMI4.0), яка орієнтується перш за все на виробництво. RAMI4.0 стандартизована на національному
рівні як DIN SPEC 91345. КНР також має свою модель промислового виробництва Індустрії 4.0, відому як
"Systemarchitecture China". Серед усіх розглянутих моделей для застосування в промисловому секторі найбільш
проробленою є німецька модель RAMI4.0), яка дає представлення про місце, роль та взаємодію активів на виробництві на кожному етапі їх життєвого циклу. Ця модель найбільш детально показує місце активів на виробництві фабрики майбутнього та їх взаємодію між собою.
Еталонна модель RAMI4.0 представляє собою тривимірну модель та відображає основні аспекти Індустрії 4.0, до яких належать горизонтальна інтеграція, вертикальна інтеграція та комплексна розробка по всьому життєвому циклу (див. рис.1). Вертикальна інтеграція передбачає безпосередню взаємодію між компонентами системи, незважаючи на їх місце в ієрархії системи. Тобто підхід Індустрії 4.0 розділяє компоненти по ієрархічним рівням (шарам) за їх функціональним призначенням, але їх зв’язок здійснюється без поступового проходження через проміжні рівні. Всі компоненти є кібер-фізичними системами і рівноправними вузлами мережі. Кібер-фізична система - це об’єднання в єдине ціле фізичних об’єктів (процесів) з об’єктами (процесами) обробки інформації, тобто обчислювальними елементами за допомогою інформаційних мереж. Під горизонтальною інтеграцією розуміється об’єднання та безпосередня взаємодія між різними підрозділами підприємства та підприємств між собою. Перша вісь моделі «Ієрархічні рівні» («Hierarchy levels») відображає саме той аспект, що всі компоненти мають конкретний функціонал відповідно до ієрархічної моделі МЕК 62264 (ISA-95), але розширеної за рахунок додавання нових рівнів. У нижній частині присутній рівень «продукту» («product»), а у верхній - «Зовнішній Світ» («Сonnected world»), який розширює межі окремого заводу/фабрики. Ця вісь не має на увазі побудову ієрархічних систем, в яких функціональні компоненти підпорядковуються компонентам, які знаходяться вище в ієрархічній піраміді. Вона передбачає означення конкретного функціоналу для кожного компоненту системи, в якій вони зв’язані безпосередньо, якщо цього вимагає логіка керування. Здатність всіх компонентів до зв’язку передбачає можливість простого налаштування, за рахунок використання І4.0-сумісного зв’язку, що повинен бути стандартним та забезпеченим у всіх компонентах системи.
Ліва горизонтальна вісь використовується для представлення життєвого циклу систем або продукту («Life cycle & value stream»), а також встановлення відмінності між «типом» («Type») та «екземпляром» («Instance»). Це дає можливість відслідковування стану продукту в будь-який момент часу його існування за рахунок постійного збору даних. Протягом життєвого циклу будь-якого компоненту системи (компонент в свою чергу виступає кібер-фізичною системою) або продукту генерується величезна кількість даних у двох розрізах існування цього продукту, як типу та як екземпляру. На виробництві кожен конкретний продукт має свій життєвий цикл, що розпочинається від ідеї його створення до утилізації. Тип продукту, як конкретна сутність, розпочинає своє існування з моменту виникнення наміру створення виробу. Ця сутність типу продукту накопичує різноманітні дані щодо його розробки. З моменту подачі типу на виготовлення, виникає конкретний екземпляр, який в свою чергу, накопичує дані щодо створення конкретного екземпляру (різноманітні виробничі дані), його реалізації та експлуатації. Тому ліва горизонтальна вість еталонної моделі архітектури Індустрії 4.0 відображає той аспект, що кожен компонент системи або продукт накопичує в собі дані, які дають можливість його безпосереднього цільового функціонування, а також можливість відслідковування стану на будь якому етапі його життєвого циклу.
Шість архітектурних рівнів («The layers»), які лежать на вертикальній вісі еталонної моделі архітектури Індустрії 4.0, означують структуру представлення компонента Індустрії 4.0 з точки зору ІТ. Тобто ця вісь показує яким чином і якими засобами активи підприємства взаємодіють між собою в мережі та як вони представлені в цифровому світі. Найнижче знаходиться рівень активів (asset layer), який означує що саме входить до активів виробництва та повинно мати представлення в цифровому світі. За еталонною моделлю Індустрії 4.0 до активів належать різноманітне програмне забезпечення (прикладні програми, програмні інструменти, прошивки), фізичні засоби виробництва (продукти, щити, транспортери, кабелі, виконавчі механізми і т.п.), загальні документи (норми, стандарти, проектні плани і т.п.), а також персонал. Над рівнем активів в еталонній моделі архітектури Індустрії 4.0 лежить рівень інтеграції (Integration layer), який забезпечує представлення фізичних активів у віртуальній мережі. Для того щоб означити обмін даними між мережними вузлами в моделі виділено комунікаційний рівень (Communication layer). Інформаційний рівень (Information layer) обумовлює які саме дані для виконання тих чи інших функцій, що лежать на функціональному рівні (Functional layer), задіяні в обміні. Усі активи тим чи іншим чином беруть участь у бізнес процесах. Тому вищий рівень (Business layer) відповідає за моделювання та організацію цих бізнес-процесів [3].
Головною ідеєю побудов мереж Індустрії 4.0 є представлення всіх активів підприємства як кібер-фізичних систем, що мають певну технічну функціональність а також віртуальне представлення у вигляді даних та функцій, які вони виконують у мережі. Для таких кібер-фізичних систем вводиться поняття «компонент Індустрії 4.0» («I4.0 component») і його реалізацію розкривають наведені вище шість рівнів представлення.
Якщо приводити до моделі RAMI4.0 існуючі системи АСУТП покоління 3.0, вони можуть включатися як компоненти 4.0 через інтеграційний і комунікаційний рівень. Реалізація інших рівнів відбувається в оболонці адміністрування, яка технічно може бути реалізована будь де, за умови підтримки I4.0-сумісного зв’язку. За таких умов ця реалізація може бути зроблена в проміжних шлюзах або/і з використанням хмарних сервісів. Використання зовнішнього світу у моделі RAMI4.0 по вертикальній осі також передбачає використання хмарних сервісів. У будь якому випадку реалізація функцій рівнів в хмарах та проміжних пристроях таких як шлюзи виходить за рамки дослідження. Увага була приділена технічній реалізації комунікаційного рівня між існуючими АСУТП та хмарними сервісами.
Огляд можливих хмарних платформ.
Шляхи інтеграції компонентів систем управління з хмарними платформами передусім залежать від вибору платформи, служб, які вона надає і відповідно протоколів, які підтримуються цими службами. Серед передових гравців на ринку хмарних платформ, які займаються просуванням Інтернету речей та пропонують відповідні продукти слід виділити наступні: Amazon Web Service, Microsoft Azure та Google Cloud Platform. Названі хмарні платформи належать до публічних і швидко розвиваються у напрямку Інтернету речей. З огляду на це, кожен з вище згаданих, надає засоби для реалізації та впровадження Інтернету речей, в тому числі і промислового Інтернету речей, який є невід’ємною частиною розвитку Індустрії 4.0. Amazon Web Service пропонує комплексне рішення для реалізації Інтернету речей, а саме AWS IoT Core – це керована хмарна платформа, яка дозволяє підключеним пристроям просто і безпечно взаємодіяти з хмарними додатками та іншими пристроями. Крім того, що хмарні сервіси надають значний функціонал для об’єднання пристроїв в загальну мережу та віддалене управління ними, важливим фактором для інтеграції з виробничим обладнанням та програмним забезпеченням є підтримуванні цими службами протоколи. AWS IoT Core підтримує протоколи HTTP, WebSockets і спрощений протокол зв'язку MQTT, спеціально спроектований для підтримки нестабільного підключення і роботи в мережах з низькою пропускною здатністю. Microsoft Azure в свою чергу пропонує комплексне рішення для Інтернету речей Azure IoT Suite. Компонент цього рішення буде розглянуто більш детально нижче. Рішенням від Google Cloud Platform виступає Google Cloud Web of Things (IoT) Core – це повністю керована служба для безпечного підключення та керування пристроями IoT.
Вище згадані платформи відносяться до споживчих хмарних платформ. Існують також промислові хмарні платформи, які набагато глибше фокусуються на операційних технологіях (ОТ) – технологіях автоматизації промислових процесів та виробництв. Вони розроблені таким чином, щоб забезпечувати збір та обробку даних під час функціонування виробничих процесів з метою підвищення продуктивності а також прогнозуючого обслуговування. Серед них GE Predix від General Electric та MindSphere від Siemens AD. Ці рішення є комерційними, мають чітке промислове спрямування, простіші з точки зору використання, але можуть виявитися більш дорожчими, ніж звичайні споживчі хмарні платформи. Крім того, враховуючи, що більш застосовані споживчі платформи вже надають ресурси для реалізації промислових рішень, їх використання може бути більш доречним. Зокрема MS Azure вже надає можливість реалізації рішень націлених на виробництво. Слід відмітити, що індустріальну платформу GE Predix теж можна розгорнути в інфраструктурі Azure і наразі Microsoft та General Electric ведуть переговори щодо співпраці, яка в майбутньому дасть змогу додаткам розгорнутим засобами MS Azure обмінюватися даними з Predix.
Інтеграція з MS Azure.
MS Azure вже зараз надає ресурси для реалізації промислового Інтернету речей та має дуже розвинену інфраструктуру. Крім того MS Azure підтримує технологію OPC UA, яка знаходиться на етапі становлення як передового стандарту для інтеграції промислового обладнання в єдину мережу. Слід зазначити що Microsoft тісно співробітничає з компаніями в світі промислової автоматизації. Крім GE, MS співпрацює з COPA-DATA, яка займає передові місця в сфері розробки програмного забезпечення HMI/SCADA. Це спонукало до зосередження деталізації в дослідженні на інтеграції існуючих АСУТП з хмарними сервісами саме Microsoft Azure.
Значна кількість виробників апаратних та програмних засобів для АСУТП на хвилі розвитку застосування промислового Інтернету речей, мають намір залишатися конкурентоспроможними та не втрачати позиції на ринку. На етапі цифрової революції неможливо уникнути об’єднання операційних та інформаційних технологій, тому для передових розробників технічного та програмного забезпечення, яке застосовується в операційних технологіях, важливо швидко адаптуватися до змін в промисловому світі. Наразі розглядаються нові інструменти в SCADA-
програмах, які дозволяють інтеграцію з хмарними сервісами, для того щоб забезпечувати віддалений моніторинг
процесу, менеджмент активів, предиктивне обслуговування, аналіз історичних даних. Як приклад, COPA-DATA для
своєї SCADA zenon пропонує використання сервісів MS Azure для розгортання мобільних додатків HMI клієнтів та
веб-сайтів для віддаленого моніторингу. Крім того в хмарі можна розмістити інструментальний засіб для побудови
звітів zenon Analyzer, що забезпечить скорочення локальних обчислювальних ресурсів та відкриту можливість
доступу до звітів усім стейкхолдерам. Таке рішення вимагає самостійного використання платформи MS Azure як
системи типу PaaS. Schneider Electric пропонує своє рішення для збору, візуалізації та аналізу промислових даних, яке
представляє собою систему типу SaaS, побудовану засобами MS Azure. Це рішення – Wonderware Online InSight, яке
дозволяє інтегруватися з такими продуктами як Wonderware InTouch HMI, Wonderware System Platform, Wonderware
Historian.
Однак не всі SCADA-програми мають вбудовані засоби інтеграції з хмарними платформами. Крім того, наявність
великої кількості впроваджень потребують інших технологій інтеграцій. Тому в дослідженні нас цікавили технології,
які б надавали можливість об’єднати більшість рішень з хмарними платформами.
Найбільш сучасною інтеграційною технологією в промисловій автоматизації є OPC UA, яка крім того є базовою
комунікаційною технологією Індустрії 4.0. Не зважаючи на те, що OPC UA є наступницею OPC Classic, вона є крос-
платформною і більше не застосовує технологію DCOM. OPC UA заснований на архітектурі SOA, яка об'єднує всі
функціональні можливості окремих специфікацій OPC Classic в одну розширювану структуру. До недавнього часу
існували обмежені можливості для інтеграції OPC UA з MS Azure. Зараз вже існує кілька можливих варіантів
підключення OPC UA та MS Azure через програмний шлюз. Запуск програмних шлюзів можливий на різноманітних
операційних системах та апаратних пристроях, включаючи віртуальні машини у хмарах. З боку MS Azure
рекомендується використовувати такі служби: IoT Hub, Event Hubs, Azure Service Bus. Вони підтримують протоколи
AMQP 1.0, MQTT 3.11 i HTTP і побудовані для отримання даних у великій кількості. IoT Hub, крім того, забезпечує
управління пристроєм та двостороннє спілкування. Розглянемо деякі пропозиції щодо інтеграції OPC UA з MS Azure.
Першим можливим варіантом реалізації передачі даних в хмарну платформу MS Azure зі SCADA-програми або
PLC, які підтримують OPC UA, є розробка власного програмного шлюзу. Написання власного шлюзу OPC UA є
відносно нескладною задачею завдяки відкритій версії OPC UA.NET Standard library та прикладам, що надає OPC
Foundation. Крім того є відкриті бібліотеки AMQP для багатьох мов програмування. Тим не менше це вимагає від
інтегратора наявність кадрів з відповідними компетенціями в об’єктно-орієнтованому програмуванні.
Другим варіантом реалізації шлюзу є використання Azure IoT Edge Gateway [4]. Azure IoT Edge Gateway є крос-
платформенним і використовує модульну архітектуру. У відкритому доступі знаходять різноманітні модулі, в тому
числі OPC UA Publisher. Інструкції щодо розробки власних модулів для Azure IoT Edge Gateway можна знайти тут за
посиланням [4]. Перевага підходу Azure IoT Edge Gateway полягає в тому, що при цьому використовується проект із
відкритим кодом, який підтримують (включаючи Microsoft) та застосовують інші користувачі, а також даний підхід
реалізує масштабовану, розширювану крос-платформну архітектуру.
Приклад реалізації даного підходу інтеграції наведений на рис.2. В даному варіанті розглядається взаємозв’язок
між компонентами системи, а саме SCADA-програмою та службою MS Azure IoT Hub. SCADA-програма має
інтегрований OPC UA сервер, служба IoT Hub зберігає та оброблює дані від різних пристроїв, забезпечує підтримку
протоколів AMQP 1.0, MQTT 3.11 i HTTP поверх TLS (протокол з шифруванням), а також надає різні можливості для
оперування отрима¬ними даними (проведення аналітики) та їх подальшого використання іншими службами,
наприклад, розгортання OPC UA клієнтів в хмарі. Такий взаємозв’язок реалізується за допомогою встановлення
програмного пакету Azure IoT Edge Gateway з боку функціонування SCADA-програми. Так як шлюз має модульну
структуру, то для встановлення зв’язку шлюзу з OPC UA сервером необхідно в його програмний код включити
модуль OPC UA Publisher, який функціонує на базі стеку OPC UA.NET Standard library. Azure IoT Edge Gateway вже
включає бібліотеки AMQP 1.0, MQTT 3.11 i HTTP, тому передача даних реалізовується за допомогою цих протоколів.
Також замість модуля OPC UA Publisher можна використовувати модуль Azure IoT Edge OPC Reverse Proxy для
реалізації двостороннього зв’язку. Якщо програмні засоби (SCADA) або пристрої не підтримують OPC UA можна використовувати готові програмні шлюзи OPC DA/UA. Наприклад, UaGateway Wrapper & Proxy v1.4.6 дозволяє підключати будь які COM/DCOM клієнти до UA серверів, або навпаки - UA клієнтів до COM/DCOM серверів всіх класичних специфікацій. UAGateway є додатком, що працює в операційній системі Windows (XP, Vista, Win7). Незабаром очікується версія, що буде підтримувати протоколи AMQP і MQTT. Це дозволить публікувати дані OPC UA та класичних OPC в хмарні сервіси та різноманітні IoT платформи. Альтернативою відкритим програмним шлюзам є комерційні шлюзи з закритою архітектурою (чорна скринька), де постачальник сам реалізовує і підтримує шлюзування між SCADA-програмою та службою MS Azure. Основна перевага використання комерційних шлюзів – це їх підтримка постачальниками.
Поряд з OPC SCADA-програми тим чи іншим способом послуговуються відкритими технологіями ODBC, OLEDB та ADO.NET для обміну з СУБД. Механізми передачі даних зі SCADA-програм в локальні бази даних SQL зокрема через MS SQL Server є достатньо відпрацьованими. У цьому випадку задача інтеграції зводиться до переміщення даних з локальної бази даних MS SQL у базу даних SQL Azure. Існує рішення, яке дозволяє зв'язувати дані між локальним сервером MS SQL та базою даних SQL Azure шляхом їх синхронізації. Засіб управління, що надається для синхронізації даних Microsoft SQL Data Sync Agent, передбачає вибір бази даних і таблиці, які необхідно синхронізувати, а потім створює завдання служби агента SQL Server для автоматичної синхронізації даних з SQL Azure за розкладом. При цьому максимальна частота синхронізації може досягати 5 хвилин. Ця технологія дозволяє розширити існуючу локальну інфраструктуру для роботи в хмарі. Завдяки зв'язуванню локальних даних з хмарною інфраструктурою можна легко налаштувати обмін інформацією з мобільними користувачами, віддаленими джерелами даних, при цьому використовуючи переваги нових служб в хмарі. Ця технологія також створює міст, який забезпечує взаємодію між локальними і віддаленими програмами.
Вище були представлені шляхи інтеграції SCADA-програм з хмарною платформою MS Azure, проте впровадження підходів Індустрії 4.0 передбачає участь всіх активів в єдиній загальній мережі. Активними учасниками процесу управління в АСУТП є програмований логічний контролер (ПЛК), який може підтримувати різноманітні промислові протоколи, такі як Profibus, EtherCAT, Modbus, EtherNet/IP, CAN, CANopen і т.п. Для встановлення зв’язку з хмарною платформою такою як MS Azure, яка підтримує AMQP, MQTT та HTTPS, необхідно використовувати проміжний пристрій – апаратний шлюз – який налаштує зв’язок, представлення та передачу даних між різними кінцевими вузлами. Використання програмних шлюзів значно спрощує інтеграцію будь яких пристроїв з хмарою та мінімізує затрати часу на написання додаткового коду. Тому виникає необхідність в правильному підборі обладнання. В якості апаратного шлюзу, як готового рішення можна використовувати продукти, які пропонує Microsoft, Advantech або Intel.
Протоколи AMQP, MQTT підтримуються хмарною платформою MS Azure та багатьма іншими. Протокол MQTT (Message Queuing Telemetry Transport) – це простий відкритий протокол, який розроблений для обміну типу «машина-машина», тому його обчислювальні вимоги є мінімальними. Крім використання апаратних шлюзів, програмовані логічні контролери можливо інтегрувати з хмарними сервісами, реалізувавши протокол MQTT безпосередньо в контролері. Для цього необхідно написати, наприклад, функціональні блоки, в яких реалізуються методи протоколу, такі як: Connect, Disconnect, Publish, Subscribe, Unsubscribe. Бібліотека таких блоків вже є реалізованою та знаходиться у відкритому доступі для ряду контролерів, наприклад, Siemens S7-300/S7-400 в середовищі програмування Step7. Маючи відкритий код неважко перенести його на інші платформи, що мають відкритий стек TCP/IP, наприклад з підтримкою CoDeSys.
Враховуючи що OPC UA набирає обертів як передовий стандарт IIoT комунікації, його все більше впроваджують на рівні контролерів. Велика кількість виробників, наприклад, ABB, Bosch Rexroth, B&R, CISCO, General Electric, KUKA, National Instruments (NI), Parker Hannifin, Schneider Electric, SEW-EURODRIVE та TTTech оголосили про співпрацю під егідою IIC та OPC Foundation. Ці компанії прагнуть до відкритої, уніфікованої, заснованої на стандартах комунікації в режимі реального часу між промисловими контролерами і хмарою. Вони приймають стандарт OPC UA як єдиний для промислової автоматизації та зв'язку IIoT. На сьогоднішній день вже в багатьох контролерах інтегровано OPC UA server: Siemens S7-1500, Modicon M241 та M251 від Schneider Electric, PACSystems RX3i 320 CPU від General Electric та інші. У якості шлюзу до MS Azure може використовуватись програмно-апаратний засіб, зроблений наприклад на Raspberry Pi.
В якості ще одного інструменту інтеграції PLC та MS Azure можна використовувати інструмент потокового програмування – Node-RED. Він надає редактор налаштування потоків, який працює на основі браузера та дозволяє зручним способом зв'язати пристрої, які мають різні комунікаційні можливості, між собою. Node-RED побудований на легкій та ефективній програмній платформі Node.js, що дозволяє використання Node-RED як на недорогих апаратних пристроях таких як Raspberry Pi, так і в хмарі. В бібліотеці на сайті Node-RED можна знайти різні «nodes», за рахунок яких можна забезпечити встановлення зв'язку між пристроями, що використовують різні протоколи.
Завдяки хмарним технологіям дані з різноманітних систем або окремих пристроїв будуть доступні всім зацікавленим особам (стейкхолдерам). Збір максимального обсягу інформації та можливість оперативно оперувати нею є важливим критерієм побудови сучасних систем управління із врахуванням підходів Indusrtie 4.0. Дослідження показали, що в цьому питанні існуючі рішення автоматизації зі світу Індустрії 3.0 можуть бути модернізовані для переходу на новий рівень розвитку. Варто відзначити що ці рішення як правило не передбачають заміну, а радше модернізацію, що дуже важливо з огляду на необхідність неперервної роботи виробництва. Запропоновані в дослідженні рішення є практичними і ними можна користуватися вже зараз. Систематизація рішень дозволяє легко зорієнтуватися у виборі в залежності від об’єкта і вимог.
